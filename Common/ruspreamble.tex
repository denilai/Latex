% Этот шаблон документа разработан в 2014 году
% Данилом Фёдоровых (danil@fedorovykh.ru) 
% для использования в курсе 
% <<Документы и презентации в \LaTeX>>, записанном НИУ ВШЭ
% для Coursera.org: http://coursera.org/course/latex .
% Исходная версия шаблона --- 
% https://www.writelatex.com/coursera/latex/5.3

% В этом документе преамбула
%
%%%==========================================%%
%%% Для избежания переносов слов
%\usepackage{ragged2e}
%\usepackage{microtype}
%
%\justifying
%\sloppy
%\tolerance=500
%\hyphenpenalty=10000
%\emergencystretch=3em
%%%==========================================%%

\newcommand{\q}{\textbf{Вопрос: }}
\newcommand{\ans}{\textbf{Ответ: }}

\usepackage{etoc}



\newcommand{\pathToScriptsFolder}{/home/denilai/Documents/repos/latex/scripts}


\usepackage{extsizes} % Возможность сделать 14-й шрифт
\def\myformat#1{\hfil #1\hfil}

% Для корректного использования русских символов в формулах
% пакеты hyperref и настройки, связанные с ним, стоит загуржать
% перед загрузкой пакета mathtext


% поддержка русских букв
% кодировка шрифта
%\usepackage[T2A]{fontenc} 
\usepackage{pscyr}
\usepackage{indentfirst} % отделять первую строку раздела абзацным отступом



%\titlespacing*{\chapter}{0pt}{<s>30pt}{*4} 

%\titleformat{\section}
%{}%{\sloppy\righthyphenmin62}
%{\thesection}
\usepackage{adjustbox}


\usepackage{titlesec}

\usepackage{titletoc}

\dottedcontents{chapter}[1.6em]{}{1.6em}{1pc}

\titleformat{\chapter}[block]
{\filcenter}
{\thechapter}
{1em}
{\MakeUppercase}{}
%{1ex}{}

%\titleformat*{\section}{\sloppy\righthyphenmin62}
%\titlespacing*{\section}{\parindent}{*4}{*1}

%\titleformat{\section}
%{}
%{\thesection}
%{1ex}{}

\titlespacing*{\section}{\parindent}{*4}{*1}

	
	
	
\usepackage{titletoc}

\dottedcontents{chapter}[1.6em]{}{1.6em}{1pc}

% объявляем новую команду для переноса строки внутри ячейки таблицы
\newcommand{\specialcell}[2][c]{%
	\begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}
% использование ненумеровонного абзаца с добавлением его в содержание
\newcommand{\anonsection}[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}
\newcommand{\anonsubsection}[1]{\subsection*{#1}\addcontentsline{toc}{subsection}{#1}}
\newcommand{\sectionunderl}[1]{\section*{\underline{#1}}}
%если нужна тема работы в отчете, то указать в скобках что-либо, иначе оаставить пустым
\newcommand{\withouttheme}{}
%если нужна дата представления отчета, то указать в скобках что-либо
\newcommand{\withoutsubmission}{1}
\newcommand{\centerboldcell}[1]{\multicolumn{1}{|c|}{\textbf{#1}}}


% настройка окружения enumerate
\usepackage{enumitem}
\setlist{noitemsep}
\setlist[enumerate]{labelsep=*, leftmargin=1.5pc}

\usepackage{hyperref}

% сначала ставить \usepackage{extsizes} % Возможность сделать 14-й шрифт
% для корректной установки полей вставлять преамбулу следует в последнюю очередь (но перед дерективой замены \rmdefault)
\usepackage[top=20mm,bottom=20mm,left=30mm,right=10mm]{geometry} % Простой способ задавать поля

\hypersetup{				% Гиперссылки
	unicode=true,           % русские буквы в раздела PDF
	pdftitle={Заголовок},   % Заголовок
	pdfauthor={Автор},      % Автор
	pdfsubject={Тема},      % Тема
	pdfcreator={Создатель}, % Создатель
	pdfproducer={Производитель}, % Производитель
	pdfkeywords={keyword1} {key2} {key3}, % Ключевые слова
	colorlinks=true,       	% false: ссылки в рамках; true: цветные ссылки
	linkcolor=black,          % внутренние ссылки
	citecolor=black,        % на библиографию
	filecolor=magenta,      % на файлы
	urlcolor=blue           % на URL
}




%\captionsetup{figurename=SDsdsd}

%%% Работа с русским языком
\usepackage{cmap}					% поиск в PDF
\usepackage{mathtext} 				% русские буквы в формулах
\usepackage[T2A]{fontenc}			% кодировка
\usepackage[utf8]{inputenc}			% кодировка исходного текста
\usepackage[english,russian]{babel}	% локализация и переносы
\usepackage{indentfirst}
\setlength\parindent{5ex}
\frenchspacing
\usepackage{multirow}    % улучшенное форматирование таблиц

% Работа с подписями рисунков и фигур
% Необходимо ставить после настройки работы с русским языком, так как иначе русские буквы в формулах не воспринимаются

\usepackage[tableposition=top,singlelinecheck=false]{caption}
\usepackage{subcaption}

\DeclareCaptionLabelFormat{gostfigure}{Рисунок #2}
\DeclareCaptionLabelFormat{gostfigureappendix}{Рисунок A.#2}
\DeclareCaptionLabelFormat{gosttable}{Таблица #2}
\DeclareCaptionLabelSeparator{gost}{~---~}
% Можно разбивать длинные таблицы вручную, оформляя каждую как table. В этом случае для продолжений таблицы нужно создать отдельный стиль заголовка
\DeclareCaptionLabelFormat{continued}{Продолжение таблицы~#2}
\captionsetup*[ContinuedFloat]{labelformat=continued}
\captionsetup{labelsep=gost}
\captionsetup*[figure]{labelformat=gostfigure, justification=centering}  % выравнивание по центру
\captionsetup*[table]{labelformat=gosttable,justification=raggedright,font=it}
% \DeclareCaptionFont{blue}{\color{blue}} 

% \captionsetup[lstlisting]{singlelinecheck=false, labelfont={blue}, textfont={blue}}
\DeclareCaptionFont{white}{\color{black}\textit}
\DeclareCaptionFormat{listing}{{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={footnotesize}}

\renewcommand{\thesubfigure}{\asbuk{subfigure}}


%  нумерованные списки
%\renewcommand{\labelenumi}{\asbuk{enumi})}
\renewcommand{\labelenumii}{\arabic{enumii})}

%Опция leftmargin устанавливает левую границу текста списка равной отступу в начале абзаца.

\usepackage{enumitem}
\makeatletter
\AddEnumerateCounter{\asbuk}{\@asbuk}{ю)}
\makeatother
\setlist{nosep, leftmargin=\parindent}


% Кроме того, мне не нравится использование дефисов в качестве маркеров, и я заменяю их на "минус":
\renewcommand{\labelitemi}{--}
\renewcommand{\labelitemii}{--}





%%Создадим стиль раздела приложения и назовем его \append
%Текст приложения включается в документ после библиографических ссылок при помощи окружения appendices
\newcommand{\empline}{\mbox{}\newline} % пустая строка
\newcommand{\appendddd}[1]{ 
	\clearpage
	\stepcounter{section}
	\begin{center}
		\chaptertitlename~\Asbuk{chapter}
	\end{center}
	\begin{center}{#1}\end{center}
	\empline
	\addcontentsline{toc}{chapter}{\Asbuk{chapter}\hspace{0.6em}~#1}}

\if 
\usepackage{caption}
\captionsetup[figure]{
		margin=10pt,
		font=small,
		figurename={Рисунок},
		figurewithin=section,
		tablewithin=section,
		labelfont={bf},
		labelsep=endash,
	    justification = raggedright,
     	singlelinecheck = false
}[table]{
	margin=10pt,
	font=small,
	%figurename={Рисунок},
	%figurewithin=section,
	tablewithin=section,
	labelfont={bf},
	labelsep=endash,
	justification = raggedright,
	singlelinecheck = false
}
\fi





\usepackage[usenames]{color}
\usepackage{colortbl}

%для изменения названия списка иллюстраций
\usepackage{tocloft}


\renewcommand{\epsilon}{\ensuremath{\varepsilon}}
\renewcommand{\phi}{\ensuremath{\varphi}}
\renewcommand{\kappa}{\ensuremath{\varkappa}}
\renewcommand{\le}{\ensuremath{\leqslant}}
\renewcommand{\leq}{\ensuremath{\leqslant}}
\renewcommand{\ge}{\ensuremath{\geqslant}}
\renewcommand{\geq}{\ensuremath{\geqslant}}
\renewcommand{\emptyset}{\varnothing}
\renewcommand{\ref}[1]{~\ref{#1}}
%\renewcommand{\thefigure}{\thesection.\arabic{figure}}


\if
%Полное отключние переносов
\pretolerance=10000
\tolerance=2000 
\emergencystretch=10pt
\fi


% Изменения параметров списка иллюстраций
%\renewcommand{\cftfigfont}{Рисунок } % добавляем везде "Рисунок" перед номером
\addto\captionsrussian{\renewcommand\listfigurename{Список иллюстративного материала}}

\newcommand{\tm}{\texttrademark\ }
\newcommand{\reg}{\textregistered\ }




%требования к спискам, возможно пригодится
%---------------------------------------------------------
%Требования на списки в стандарте следующие:
%нумерованные списки на первом уровне помечаются как «а)», «б)», «в)»… На втором — как «1)», «2)», «3)». Да-да, я тоже не вижу тут ни капли логики.
%ненумерованные списки помечаются дефисами.

%\usepackage{enumitem}
%\makeatletter
%\AddEnumerateCounter{\asbuk}{\@asbuk}{м)}
%\makeatother
%\setlist{nolistsep}
%\renewcommand{\labelitemi}{-}
%\renewcommand{\labelenumi}{\asbuk{enumi})}
%\renewcommand{\labelenumii}{\arabic{enumii})}
%------------------------------------------------------


%%% Дополнительная работа с математикой
\usepackage{amsmath,amsfonts,amssymb,amsthm,mathtools} % AMS
\usepackage{icomma} % "Умная" запятая: $0,2$ --- число, $0, 2$ --- перечисление

%% Номера формул
%\mathtoolsset{showonlyrefs=true} % Показывать номера только у тех формул, на которые есть \eqref{} в тексте.
%\usepackage{leqno} % Нумереация формул слева

%% Свои команды
\DeclareMathOperator{\sgn}{\mathop{sgn}}

%% Перенос знаков в формулах (по Львовскому)
\newcommand*{\hm}[1]{#1\nobreak\discretionary{}
{\hbox{$\mathsurround=0pt #1$}}{}}


% отступ для первого абзаца главы или параграфа
%\usepackage{indentfirst}

%%% Работа с картинками
\usepackage{graphicx}  % Для вставки рисунков
\graphicspath{{images/}{screnshots/}{../images/}}  % папки с картинками
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\setlength\fboxsep{3pt} % Отступ рамки \fbox{} от рисунка
\setlength\fboxrule{1pt} % Толщина линий рамки \fbox{}
\usepackage{wrapfig} % Обтекание рисунков текстом

%%% Работа с таблицами
\usepackage{array,tabularx,tabulary,booktabs} % Дополнительная работа с таблицами
\usepackage{longtable}  % Длинные таблицы
\usepackage{multirow} % Слияние строк в таблице

%%% Теоремы
\theoremstyle{plain} % Это стиль по умолчанию, его можно не переопределять.
\newtheorem{theorem}{Теорема}[section]
\newtheorem{proposition}[theorem]{Утверждение}

\theoremstyle{plain} % Это стиль по умолчанию, его можно не переопределять.
\newtheorem{work}{Практическая работа}[part]



\theoremstyle{definition} % Это стиль по умолчанию, его можно не переопределять.
\newtheorem{mypart}{Часть}
\newtheorem{step}{Шаг}[mypart]
 
 
\theoremstyle{definition} % "Определение"
\newtheorem{corollary}{Следствие}[theorem]
\newtheorem{problem*}{Задание}
\newtheorem{problem}{Задание}[section]
\newtheorem{task}{Подзадание}[problem]
%\newtheorem{script}{Cценарий}
 
\theoremstyle{remark} % "Примечание"
\newtheorem*{nonum}{Решение}
\newtheorem{script}{Cценарий}


%%% Программирование
\usepackage{etoolbox} % логические операторы

%%% Страница

\usepackage{fancyhdr}


% нумерация страниц справа вверху
%\pagestyle{fancy}
%\fancyhf{}
%\rhead{\thepage}
%\renewcommand{\headrulewidth}{0pt}




%	\usepackage{fancyhdr} % Колонтитулы
% 	\pagestyle{fancy}
%   \renewcommand{\headrulewidth}{0pt}  % Толщина линейки, отчеркивающей верхний колонтитул
% 	\lfoot{Нижний левый}
% 	\rfoot{Нижний правый}
% 	\rhead{Верхний правый}
% 	\chead{Верхний в центре}
% 	\lhead{Верхний левый}
%	\cfoot{Нижний в центре} % По умолчанию здесь номер страницы

\usepackage{setspace} % Интерлиньяж
\onehalfspacing % Интерлиньяж 1.5
%\doublespacing % Интерлиньяж 2
%\singlespacing % Интерлиньяж 1

\usepackage{lastpage} % Узнать, сколько всего страниц в документе.

\usepackage{soul} % Модификаторы начертания


\usepackage[usenames,dvipsnames,svgnames,table,rgb]{xcolor}


\usepackage{csquotes} % Еще инструменты для ссылок

%\usepackage[style=authoryear,maxcitenames=2,backend=biber,sorting=nty]{biblatex}

\usepackage{multicol} % Несколько колонок

\usepackage{tikz} % Работа с графикой
\usepackage{pgfplots}
\usepackage{pgfplotstable}

% модуль для вставки рыбы
\usepackage{blindtext}

\usepackage{listings}
\usepackage{color}


% для поворота отдельной страницы. Использовать окружение \landscape
\usepackage{pdflscape} 
\usepackage{rotating} 


\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}


% пример импорта файла
%\lstinputlisting{/home/denilai/repomy/conf/distributions}

%\lstset{
%	language=Python,
%	basicstyle=\footnotesize,        % the size of the fonts that are used for the code
%	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
%	numbersep=5pt,                   % how far the line-numbers are from the code
%	numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
%	stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
%	% Tab - 2 пробела
%	tabsize=2,    
%	% Автоматический перенос строк
%	breaklines=true,
%	frame=single,
%	breakatwhitespace=true,
%	title=\lstname, 
%	commentstyle=\color{mygreen}    % comment style
%}



\lstset{ 
	inputencoding=utf8,
	basicstyle=\footnotesize\ttfamily, % Default font
	backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
	%basicstyle=\footnotesize,        % the size of the fonts that are used for the code
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
	breaklines=true,                 % sets automatic line breaking
	captionpos=t,                    % sets the caption-position to bottom
	%commentstyle=\color{mygreen},    % comment style
	deletekeywords={...},            % if you want to delete keywords from the given language
	escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
	firstnumber=1,                % start line enumeration with line 1000
	frame=single,	                   % adds a frame around the code
	keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
	%keywordstyle=\color{blue},       % keyword style
	language=Java,                 % the language of the code
	morekeywords={*,...},            % if you want to add more keywords to the set
	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
	numbersep=5pt,                   % how far the line-numbers are from the code
	numberstyle=\tiny, % the style that is used for the line-numbers
	rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
	%stringstyle=\color{mymauve},     % string literal style
	tabsize=2,	                   % sets default tabsize to 2 spaces
	title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}

\usepackage{tabularx}



\usepackage{tocloft}
\addto\captionsenglish{\renewcommand{\contentsname}{Table of Contents}}
\renewcommand{\cfttoctitlefont}{\hfill\normalsize}
\renewcommand{\cftaftertoctitle}{\hfill}

\usepackage{ragged2e}
\usepackage{microtype}


\justifying
\sloppy
\tolerance=500
\hyphenpenalty=10000
\emergencystretch=3em


