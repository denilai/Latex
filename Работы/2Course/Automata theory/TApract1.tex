\documentclass[a4paper,14pt]{extarticle}

% Путь до папки с общими шаблонами
\newcommand{\pathToCommonFolder}{/home/denilai/Desktop/LaTeX/Common}
% Название работы в титуле
\newcommand{\workname}{Отчет по практической работе №1}
% Название дисциплины в титуле
\newcommand{\discipline}{Теория автоматов}
% Название кафедры в титуле
\newcommand{\kafedra}{Кафедра Вычислительной техники}
% Тема работы в титуле
\newcommand{\theme}{Умножитель 4-разрядных чисел без знака}
% Должность преподавателя в титуле
\newcommand{\rang}{ассистент}
% ФИО преподавателя в титуле
\newcommand{\teacherfio}{А.~С.~Боронников}


\usepackage{tabularx}

\usepackage{booktabs}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcommand{\heading}[1]{\multicolumn{1}{c}{#1}}

% Вставка заготовки преамбулы
\input{\pathToCommonFolder/ruspreamble}

% установка размера шрифта для всего документа
%\fontsize{20pt}{18pt}\selectfont
\usepackage{extsizes} % Возможность сделать 14-й шрифт

\author{Кирилл Денисов}
\title{Практическая работа №2}
\date{\today}

% установка полуторного интервала
% \usepackage{setspace}  
% \onehalfspacing

% использовать Times New Roman
\renewcommand{\rmdefault}{ftm}


\begin{document}
	\thispagestyle{empty}
	
	% Вставка первого титульного листа
	\input{\pathToCommonFolder/titul}
	
	\newpage
	\tableofcontents
	\newpage
	
\section{Общее строение автомата}
В любом устройстве обработки цифровой информации можно выделить два основных блока – операционный автомат (ОА) и управляющий автомат (УА). Операционный автомат (ОА) служит для хранения слов информации, выполнения набора микроопераций и вычисления значений логических условий, т.е. операционный автомат является структурой, организованной для выполнения действий над информацией. Микрооперации, выполняемые ОА, задаются множеством \textit{управляющих} сигналов $Y\left\{y_1,....,y_M\right\}$, с каждым из которых отождествляется определенная микрооперация.

Значения логических условий, вычисляемые в операционном автомате, отображаются множеством \textit{осведомительных} сигналов $X=\left\{x_1,...,x_L\right\}$, каждый из которых отождествляется с определенным логическим условием.

Управляющий автомат (УА) генерирует последовательность управляющих сигналов, предписанную микропрограммой и соответствующую значениям логическим условий. Управляющий автомат задает порядок выполнения действий в ОА, вытекающий из алгоритма выполнения операций. Наименование операции, которую необходимо выполнить в устройстве, определяется кодом g операции, поступающим в УА извне. 

В отличие от УА с жесткой логикой, закон функционирования которого обеспечивается определенным образом соединенными логическими элементами, в автоматах, построенных на основе ПЗУ, заданная микропрограмма реализуется в явной форме и хранится в памяти в виде последовательности управляющих слов. Управляющее слово определяет порядок работы устройства в течение одного такта и называется микрокомандой (МК). Она содержит информацию о микрооперациях, которые должны выполняться в данном такте, и (или) об адресе следующей микрокоманды.

В ходе данной практической работы был реализован автомат, выполняющий умножение 4-разрядных чисел без знака. Управляющий автомат был построен по схеме с адресным ПЗУ в последовательном варианте. Рассмотрим строение управляющего автомата. См рисунок~\ref{img:scheme}.

\begin{figure}[h!]
	\begin{center}
		\includegraphics[width=0.8\linewidth]{line_rom}
		\caption{УА с адресным ПЗУ; последовательный вариант}
		\label{img:scheme}
	\end{center}	
\end{figure}

В конкретной реализации роль мультиплексора выполняет логический элемент ИЛИ, на входы которого подаются сигналы $CT0$~---~признак нуля в счетчике и осведомительный сигнал (признак) $H$~---~указывающий на присутствие логического ветвления в текущем месте алгоритма.
\newpage
\section{Алгоритм работы автомата}
Опишем алгоритм работы автомата с помощью блок схемы. Используем сумматор для сложения текущего значение СЧП и множимого, счетчик для подсчета обработанных разрядов и регистры для хранения и использования разрядов рассматриваемых чисел. Обозначим микрокоманды от $m_0$ до $m_4$. См. рисунок~\ref{img:algorithm}.\vspace{2ex}

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth]{algorithm}
	\caption {Алгоритм умножения двух 4-разрядных чисел}
	\label{img:algorithm}
\end{figure}

В алгоритме присутствует условие, это означает, что при реализации операционного автомата текущие значение счетчика необходимо проверять при переходе $m_0 \to m_1$ и $m_3 \to m_1$.

После построения алгоритма работы автомата следует перейти к реализации операционной части.

\section {Реализация Операционного автомата}
Построим операционный автомат, выполняющий умножение двух 4-разрядных чисел посредством использования четырех регистров, в том числе двух сдвиговых. Приведем названия и назначения каждого из регистров. См. таблицу \ref{tab:regs}.
\begin{table}[h!]
	\centering
		\begin{tabular}{|p{0.27\linewidth}|p{0.6\linewidth}|}
			\hline
			\textbf{Идентификатор} & \textbf{Назначение} \\ \hline
			$RG\_A$ & Хранит разряды множимого \\ \hline
			$RG\_B$ & Сдивговый регистр. Хранит разряды множителя \\ \hline
			$RG\_R$ & Cдвиговый регистр. Хранит разряды СЧП, служит для хранения старших разрядов результата \\ \hline
			$RG\_D$ & Сдвиговый регистр. Хранит младшие разряды результата \\ \hline
		\end{tabular}
		\caption{Регистры операционного автомата}
		\label{tab:regs}
\end{table}

Укажем необходимые признаки, которые впоследствии будут вырабатываться управляющим автоматом. См. таблицу \ref{tab:signals}.
\begin{table}[h!]
	\centering
	\begin{tabular}{|p{0.27\linewidth}|p{0.6\linewidth}|}
		\hline
		\textbf{Признак} & \textbf{Назначение} \\ \hline
		$Н$ & Указывает на условность--безусловность перехода \\ \hline
		$EMIT\_R_0$ & Сигнализирует об окончании операции умножения \\ \hline
		$LOAD\_R$ & Загрузка в регистр $RG\_R$ \\ \hline
		$RST$ & Асинхронный сброс всех элементов \\ \hline
		$COUNT\_CT$ & Загрузка счетчика. Декремент, если $DECR\_CT==1$ \\ \hline
		$DECR\_CT$ & Декремент счетчика \\ \hline
		$LOAD\_AB$ & Загрузка в регистры $RG\_A \text{ и } RG\_B$ \\ \hline
		$SHIFT\_RB$ & Сдвиг в регистрах $RG\_R \text{ и } RG\_B$ \\ \hline
	\end{tabular}
	\caption{Осведомительные сигналы (признаки)}
	\label{tab:signals}
\end{table}
Соединим все элементы в соответствии с алгоритмом задачи. См. рисунок \ref{img:oa}.

\begin{figure}[h!]
	\centering
	\includegraphics[width=\linewidth]{OA}
	\caption {Схема операционного автомата}
	\label{img:oa}
\end{figure}
\newpage
\section {Реализация управляющего автомата}
Приступим к построению управляющего автомата, определяющего последовательность выполнения микрокоманд для умножения двух 4-разрядных чисел. 

Определим разрядность адресного ПЗУ и ПЗУ микрокоманд. Адрес должен иметь 4 разряда, где ведущим разряд~--- текущее значение параметра \textit{CT0}. Микрокоманда представлена в виде 8 бит~--- 8 признаков, расположенных в следующем порядке: H, EMIT\_R0, LOAD\_R, RST, CONT\_CT, DECR\_CT, LOAD\_AB, SHIFT\_RB. Адрес текущей команды будет храниться в 4-разрядном регистре.


Заполним память в соответствии в алгоритмом, подключим ПЗУ и регистр последовательным способом. См рисунок \ref{img:ma}.
\begin{figure}[h!]
	\centering
	\includegraphics[width=\linewidth]{MA}
	\caption {Схема операционного автомата}
	\label{img:ma}
\end{figure}

\section{Тестирование работы автомата}
После реализации операционного и управляющего автомата следует приступить к объединению данных устройств, тестированию их совместной работы. Подключим признаки к входам соответствующих логических элементов и цифровых устройств с помощью туннелей. Добавим блок ввода исходных данных, используя контакты, блок вывода~---регистр результата и индикатор завершения операции умножения.

Проведем проверку корректности выходных результатов построенного цифрового устройства. Перемножим два наибольших 4-разрядных двоичных числа $1111_2 \ast 1111_2$ ожидая получить двоичное число $11100001_2$. Укажем входные данные, будем подавать тактовые сигналы до тех пор, пока индикатор не сообщит нам о завершении операции, сравним практические результаты с ожидаемыми. См рисунок~\ref{img:test}. Умножение выполнено корректно. Ожидаемые и полученные результаты совпадают.
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{test}
	\caption {Схема операционного автомата}
	\label{img:test}
\end{figure}

\newpage
\section {Вывод}
В ходе данной практической работы было рассмотрено строение и работа управляющего автомата с адресным ПЗУ. Использовав полученные знания на практике, на основе данного управляющего автомата построено вычислительное устройство (операционный и управляющий автомат), реализующее операцию умножения двух 4-разрядных чисел без знака. Работа данного устройства испытана, проверена корректность полученных результатов. 


\end{document}


