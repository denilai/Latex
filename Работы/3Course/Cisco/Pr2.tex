\documentclass[a4paper,14pt]{extarticle}

% Путь до папки с общими шаблонами
\newcommand{\pathToCommonFolder}{/home/denilai/Documents/repos/latex/Common}
% Название работы в титуле
\newcommand{\workname}{Отчет по практической работе №4}
% Название дисциплины в титуле
\newcommand{\discipline}{Архитектура процессоров и микропроцессоров}
% Название кафедры в титуле
\newcommand{\kafedra}{Кафедра вычислительной техники}
% Тема работы в титуле
\newcommand{\theme}{Стадии выполнения команд процессором КР580ВМ80}
% Должность преподавателя в титуле
\newcommand{\rang}{cтарший преподаватель кафедры ВТ}
% ФИО преподавателя в титуле
\newcommand{\teacherfio}{Ю.~М.Скрябин}
\newcommand{\studentfio}{К.~Ю.~Денисов}
\newcommand{\signature}{\pathToCommonFolder/denisov-signature}

\newcommand{\pt}{PacketTracer\copyright}

\usepackage{tabularx}



\usepackage{booktabs}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcommand{\heading}[1]{\multicolumn{1}{|c|}{#1}}

% установка размера шрифта для всего документа
%\fontsize{20pt}{18pt}\selectfont
\usepackage{extsizes} % Возможность сделать 14-й шрифт

% Вставка заготовки преамбулы
\input{\pathToCommonFolder/ruspreamble}

\author{Кирилл Денисов ИВБО-02-19}
\title{Практическая работа №2\\Вариант 6}
\date{\today}

\renewcommand{\withouttheme}{1}

% установка полуторного интервала
% \usepackage{setspace}  
% \onehalfspacing

% использовать Times New Roman
\renewcommand{\rmdefault}{ftm}


\begin{document}
	%\thispagestyle{empty}
	% Вставка первого титульного листа
	%\input{\pathToCommonFolder/titul-with-signature}
	\newpage
	%\tableofcontents
	\newpage
	%\listoftables
\maketitle

\begin{table}[htbp]
\begin{center}
		\caption{Таблица адресации}
	\begin{tabular}{|l|l|l|l|}
		\hline
		Устройство  & Интерфейс & IP-адрес & Маска подсети \\ \hline
		PC-A & NIC & 192.168.6. 10 & 255.255.255.0 \\ \hline
		PC-B & NIC & 192.168.6. 11 & 255.255.255.0 \\ \hline
		S1\_ФАМИЛИЯ & VLAN 1 & 192.168.6. 1 & 255.255.255.0 \\ \hline
		S2 & VLAN 1 & 192.168.6. 2 & 255.255.255.0 \\ \hline
		PC-A & NIC & 192.168.6. 10 & 255.255.255.0 \\ \hline
	\end{tabular}
	\label{tab:adress}
\end{center}
\end{table}

\mypart{Настройка топологии сети (только Ethernet)}
Построим топологию сети в соответствии с заданием. (см. рис. \ref{fig:topology}).
% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/topology}
	\caption{Топология сети}
	\label{fig:topology}
\end{figure}

\mypart{Настройка узлов ПК}
\step{Настройте статический IP-адрес на компьютерах}
Настроим статический IP-адрес на компьютерах в соответствии в заданием. Воспользуемся графическим интерфейсом \pt (см. рис. \ref{fig:ips}).

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/IPs}
	\caption{Настройка IP-адресов}
	\label{fig:ips}
\end{figure}

\step {Проверьте настройки ПК и подключения}
Проверим конфигурацию компьютеров, выполнив команду 
\begin{lstlisting}
	ipconfig \all
\end{lstlisting}
Отправим эхо запрос по адресу 192.168.6.11, чтобы проверить возможность связи с компьютером PC-B. (см. рис. \ref{fig:ping-pc-b}).
% TODO: \usepackage{graphicx} required
\begin{figure}
	\centering
	\includegraphics[width=0.7\linewidth]{images/ping-pc-b}
	\caption{Проверка соединения}
	\label{fig:ping-pc-b}
\end{figure}

\mypart{Базовая настройка и проверка настроек коммутатора}
\step{Подключитесь к коммутатору через консоль}
С графического интерфейса \pt получим доступ к  коммутатору через консоль.
\step{Войдите в привилегированный режим EXEC}
Перейдем в привилегированный режим EXEC, выполнив команду \textit{enable}.
\begin{lstlisting}
	Switch> enable
	Switch #
\end{lstlisting}

Приглашение в командной строке изменится с Switch> на Switch\#, что указывает на привилегированный режим EXEC.
\step{Войдите в режим глобальной конфигурации}
Для входа в режим конфигурации используем команду \textit{configuration terminal}.
\begin{lstlisting}
	Switch# configure terminal
	Enter configuration commands, one per line. End with CNTL/Z.
	Switch(config)#
\end{lstlisting}
\step{Присвойте коммутатору имя}
С помощью команды \textit{hostname} изменим имя коммутатора на S1\_Denisov.
\begin{lstlisting}
	Switch(config)# hostname S1
	S1_DENISOV(config)#
\end{lstlisting}
\step{Запретите попытки коммутатора преобразовывать неверные команды, как будто
	они являются именами узлов}
Отключим поиск в DNS, чтобы предотвратить попытки коммутатора преобразовывать введенные
команды таким образом, как будто они являются именами узлов.
\begin{lstlisting}
	S1_DENISOV(config)# no ip domain-lookup
	S1_DENISOV(config)#
\end{lstlisting}

\step{Введите локальные пароли}
\begin{lstlisting}
	S1_DENISOV(config)# enable secret class
	S1_DENISOV(config)# line con 0
	S1_DENISOV(config-line)# password cisco
	S1_DENISOV(config-line)# login
	S1_DENISOV(config-line)# exit
	S1_DENISOV(config)#
\end{lstlisting}
\step{Введите баннер MOTD (сообщение дня)}
\begin{lstlisting}
	S1_DENISOV(config)# banner motd "This is a secure system. Authorized Access Only!"
\end{lstlisting}
\step{Настройте IP-адрес интерфейса SVI}
Настроим SVI. Для этого перейдем в режим конфигурации интерфейса vlan1.
\begin{lstlisting}
	S1_DENISOV(config)#interface vlan 1 
	S1_DENISOV(config-if)#ip address 192.168.6.1 255.255.255.0   
\end{lstlisting}
\step{Сохраните конфигурацию}
	С помощью команды copy сохраним текущую конфигурацию в файл загрузочной конфигурации,
который хранится в NVRAM.
\begin{lstlisting}
	S1_DENISOV# copy running-config startup-config
	Destination filename [startup-config]? [Enter]
	Building configuration...
	[OK]
	S1_DENISOV#
\end{lstlisting}
\step{Отобразите текущую конфигурацию}
Команда \textit{show running-config} отображает всю текущую конфигурацию постранично
\begin{lstlisting}
Building configuration...

Current configuration : 1288 bytes
!
version 15.0
no service timestamps log datetime msec
no service timestamps debug datetime msec
no service password-encryption
!
hostname Switch
!
enable secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
!
!
!
no ip domain-lookup
!
!
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
!
interface FastEthernet0/2
!
interface FastEthernet0/3
!
interface FastEthernet0/4
!
interface FastEthernet0/5
!
interface FastEthernet0/6
!
interface FastEthernet0/7
!
interface FastEthernet0/8
!
interface FastEthernet0/9
!
interface FastEthernet0/10
!
interface FastEthernet0/11
!
interface FastEthernet0/12
!
interface FastEthernet0/13
!
interface FastEthernet0/14
!
interface FastEthernet0/15
!
interface FastEthernet0/16
!
interface FastEthernet0/17
!
interface FastEthernet0/18
!
interface FastEthernet0/19
!
interface FastEthernet0/20
!
interface FastEthernet0/21
!
interface FastEthernet0/22
!
interface FastEthernet0/23
!
interface FastEthernet0/24
!
interface GigabitEthernet0/1
!
interface GigabitEthernet0/2
!
interface Vlan1
ip address 192.168.6.1 255.255.255.0
!
banner motd ^CThis is a secure system. Authorized Access Only!^C
!
!
!
line con 0
password cisco
login
!
line vty 0 4
password cisco
login
transport input telnet
line vty 5 15
login
!
!
!
!
end
\end{lstlisting}
\step{Отобразите версию IOS и другую информацию о коммутаторе}
С помощью команды\textit{ show version} отобразим версию IOS коммутатора, а также другую полезную
информацию. Здесь для пролистывания отображаемых данных также используется клавиша пробела. (см. рис. \ref{fig:version-listitng}).
% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/version-listitng}
	\caption{Вывод команды show verison}
	\label{fig:version-listitng}
\end{figure}

\step{Отобразите состояние подключенных интерфейсов коммутатора}
Для проверки состояния подключенных интерфейсов используем команду \textit{show ip interface brief}. Для
пролистывания списка используйте клавишу пробела. (см. рис. \ref{fig:interface-listing} ).

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/interface-listing}
	\caption{Вывод команды show ip interface brief }
	\label{fig:interface-listing}
\end{figure}

\step{Подключитесь к коммутатору S1\_DENISOV по протоколу Telnet}
Подключимся к коммутатору S1\_DENISOV по протоколу Telnet (см. рис. \ref{fig:telnet-sw1}).
% TODO: \usepackage{graphicx} required
\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.7\linewidth]{images/telnet-sw1}
	\caption{Подключение к коммутатору по протоколу Telnet}
	\label{fig:telnet-sw1}
\end{figure}
\newpage
\step{Повторите шаги 1–13 для настройки коммутатора S2}
Выполним аналогичные шаги для коммутатора S2. Приведем его текущую конфигурацию.
\begin{lstlisting}
	Building configuration...
	
	Current configuration : 1288 bytes
	!
	version 15.0
	no service timestamps log datetime msec
	no service timestamps debug datetime msec
	no service password-encryption
	!
	hostname Switch
	!
	enable secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
	!
	!
	!
	no ip domain-lookup
	!
	!
	!
	spanning-tree mode pvst
	spanning-tree extend system-id
	!
	interface FastEthernet0/1
	!
	interface FastEthernet0/2
	!
	interface FastEthernet0/3
	!
	interface FastEthernet0/4
	!
	interface FastEthernet0/5
	!
	interface FastEthernet0/6
	!
	interface FastEthernet0/7
	!
	interface FastEthernet0/8
	!
	interface FastEthernet0/9
	!
	interface FastEthernet0/10
	!
	interface FastEthernet0/11
	!
	interface FastEthernet0/12
	!
	interface FastEthernet0/13
	!
	interface FastEthernet0/14
	!
	interface FastEthernet0/15
	!
	interface FastEthernet0/16
	!
	interface FastEthernet0/17
	!
	interface FastEthernet0/18
	!
	interface FastEthernet0/19
	!
	interface FastEthernet0/20
	!
	interface FastEthernet0/21
	!
	interface FastEthernet0/22
	!
	interface FastEthernet0/23
	!
	interface FastEthernet0/24
	!
	interface GigabitEthernet0/1
	!
	interface GigabitEthernet0/2
	!
	interface Vlan1
	ip address 192.168.6.2 255.255.255.0
	!
	banner motd ^CThis is a secure system. Authorized Access Only!^C
	!
	!
	!
	line con 0
	password cisco
	login
	!
	line vty 0 4
	password cisco
	login
	transport input telnet
	line vty 5 15
	login
	!
	!
	!
	!
	end
\end{lstlisting}
\step{Запишите состояние указанных ниже интерфейсов}

\begin{table}[h!]
	\begin{center}
		\caption{Состояние интерфейсов}
	\begin{tabular}{|c|c|c|c|c|}
		\hline
		& \multicolumn{2}{|c|}{S1\_DENISOV}  & \multicolumn{2}{c|}{S2}  \\
		\hline
		Интерфейс & Статус & Протокол & Статус & Протокол \\
		\hline
		FE0/1 & up & up & up & up \\
		FE0/2 &  up & up &  down &  down\\
		FE0/15 &  down &  down&   down &  down\\
		\hline
	\end{tabular}
	\label{tab:interface-status}
	\end{center}
\end{table}
Причина того, почему некоторые порты выключены в том, что все подключенные порты включены. Другие по умолчанию отключены. Vlan1 также отключена по умолчанию в \pt.

\end{document}

