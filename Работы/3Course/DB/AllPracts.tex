\documentclass[a4paper,14pt]{extarticle}

\newcommand{\stend}{\textbf{Wb-demo-kit v.2}}

% Путь до папки с общими шаблонами
\newcommand{\pathToCommonFolder}{/home/denilai/Documents/repos/latex/Common}
\newcommand{\pathToScriptsFolder}{/home/denilai/Documents/repos/latex/scripts}
% Название работы в титуле
\newcommand{\workname}{ОТЧЕТ ПО ПРАКТИЧЕСКИМ РАБОТАМ}
% Название дисциплины в титуле
\newcommand{\discipline}{Разработка баз данных}
% Название кафедры в титуле
\newcommand{\kafedra}{Кафедра промышленной информатики (ПИ)}
% Тема работы в титуле
\newcommand{\theme}{Знакомство с оборудованием}
% Должность преподавателя в титуле
\newcommand{\rang}{инженер, ассистент}

% ФИО студента в титуле
\newcommand{\studentfio}{К.~Ю.~Денисов}%\\Д.~Н.~Федосеев\\А.~М.~Сосунов}\\%К.~Ю.~Денисов\\%И.~А.~Кремнев
% ФИО преподавателя в титуле
\newcommand{\teacherfio}{Д.~С.~Киселев}
\newcommand{\signature}{\pathToCommonFolder/denisov-signature}


\usepackage{tabularx}


\usepackage{booktabs}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcommand{\heading}[1]{\multicolumn{1}{c}{#1}}

% установка размера шрифта для всего документа
%\fontsize{20pt}{18pt}\selectfont
\usepackage{extsizes} % Возможность сделать 14-й шрифт

% Вставка заготовки преамбулы
\input{\pathToCommonFolder/ruspreamble}

\author{Кирилл Денисов}
\title{Лабораторная работа №1}
\date{\today}

\renewcommand{\withouttheme}{1}

\newcommand{\erassistant}{\texttt{ErAssistant}}
\newcommand{\erdatamodaler}{\texttt{ERwin Data Modeler}}
\newcommand{\methodsection}{Работа по методическим указаниям}
\newcommand{\individual}{Индивидуальный вариант}

%если нужна тема работы в отчете, то указать в скобках что-либо, иначе оаставить пустым
%\renewcommand{\withouttheme}{}
%если нужна дата представления отчета, то указать в скобках что-либо
%\renewcommand{\withoutsubmissiondate}{1}

% установка полуторного интервала
% \usepackage{setspace}  
% \onehalfspacing

% использовать Times New Roman
\renewcommand{\rmdefault}{ftm}


\begin{document}
	
	\gdef\capnames{
		\gdef\figurename{Рисунок}
		\gdef\chaptername{ГЛАВА}
		\gdef\appendixname{ПРИЛОЖЕНИЕ}
		\gdef\bibname{СПИСОК ЛИТЕРАТУРЫ}
		\gdef\contentsname{СОДЕРЖАНИЕ}
		\bibliographystyle{gost71s}
	}
	
	
	\thispagestyle{empty}
	% Вставка первого титульного листа
	% Есть две версии титульного листа - одиночный (titul) и групповой (titulAll)
	\input{\pathToCommonFolder/titul-with-signature}
	\newpage
	\tableofcontents
	\newpage
	%\listoftables

\normalsize

\section{Построение модели данных}
\subsection{\methodsection}
\subsubsection*{Описание предметной области}
Компания занимается производством и продажей небольших статуэток,
раскрашиваемых вручную. Компания имеет несколько производственных
направлений. Миниатюры изготавливаются из гипса, олова или алюминия.

Компания распространяет свои товары по трем каналам. Компания содержит
пять собственных розничных магазинов. Помимо этого, компания владеет
сайтом, на котором ведется online-торговля, и осуществляет оптовые поставки
сторонним
дистрибьюторам.
Для
анализа
статистики,
системой автоматизации производства, нужен интерактивный аналитический
инструмент. Поэтому необходимо спроектировать и построить модель данных,
которая станет хранилищем информации по производству.

В ходе производства изделий система автоматизации производства
управляет всеми станками компании. Каждый станок реализует полный цикл
производства изделий, включая:
\begin{itemize}
	\item заполнение формы сырьем (гипсом, оловом или алюминием);
	\item затвердевание материала;
	\item  удаление изделия из формы после затвердевания;
	\item при необходимости автоматизированная раскраска изделий (оловянные фигурки не раскрашиваются);
	\item сушку после покраски (при необходимости).
\end{itemize}


Покраска и сушка могут производиться за несколько этапов в зависимости
от сложности изделия. По мере готовности изделия проходят проверку,
выполняемую оператором станка.

Оператор станка регистрируется в системе. В ходе этого процесса оператор
сообщает системе автоматизации производства тип производимых изделии и
объем загруженного в машину сырья. Оператор также делает в системе запись
при отбраковке изделий.

В ходе
интервью необходимые для эффективного анализа статистики:
\begin{itemize}

\item  число принятых изделий по объему сырья, видам изделий, машинам и
\item  время формовки и затвердевания по видам изделий, машинам и дням;
\item  время покраски и сушки по типам краски, видам изделий, машинам и
\item  сворачивание по подтипам изделий, которые сворачиваются по типам;
\item  сворачивание по типам машин, которые сворачиваются по материалам
(гипс, олово или алюминий);
\item  сворачивание машин по фабрикам, которые сворачиваются по странам;
\item  сворачивание дней по месяцам, месяцев — по кварталам, кварталов – по
\item  возможность фильтрации информации по производителю и дате
\end{itemize}
покупки машины.
Анализ файла-экспорта из системы автоматизации производства показал,
что для каждого вида производимых изделий есть отдельная строка, в которой
присутствует следующая информация:
\begin{itemize}
	\item  тип изделия;
	\item  объем сырья;
	\item  номер машины;
	\item  личный номер оператора;
	\item  время и дата начала производства (когда серия начата);
	\item  время и дата окончания производства (когда серия закончена);
	\item  флаг отбраковки.
\end{itemize}
\subsubsection*{Построение модели}
По приведенному описанию предметной области построим ее модель в среде \erassistant. Укажем линии связей, назначим им имена, укажем типы и кратность связей. В результате работы, модель примет вид, приведенный на Рисунке \ref{fig:1-metod}.

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/1-metod}
	\caption{Модель данных Производства со связями}
	\label{fig:1-metod}
\end{figure}
%Сформируем отчет по данной модели средствами \erassistant. Перед формированием отчета убедимся в отсутствии ошибок в построенной модели. Проверка наличия ошибок осуществляется нажатием кнопки "Check~Diagram" на панели инструментов в верхней части экрана (см. рисунки \ref{fig:1-report}, \ref{fig:1-report2}).


%% TODO: \usepackage{graphicx} required
%\begin{figure}[h!]
%	\centering
%	\includegraphics[width=0.7\linewidth]{images/1-report}
%	\caption{Отчет разработанной модели данных производства часть 1}
%	\label{fig:1-report}
%\end{figure}
%
%% TODO: \usepackage{graphicx} required
%\begin{figure}[h!]
%	\centering
%	\includegraphics[width=0.7\linewidth]{images/1-report2}
%	\caption{Отчет разработанной модели данных производства часть 2}
%	\label{fig:1-report2}
%\end{figure}

%Отчет по построенной модели приведен на Рисунке ... .
\newpage
\subsection{\individual}
\subsubsection*{Описание предметной области}
В качестве индивидуального задания была выбрана реализация модели информационной системы по хранению и анализу данных  предприятия, занимающегося сборкой и поставкой спортивных велосипедов для конечных потребителей по индивидуальному заказу.

Предприятие располагает широким выборов компонентов и комплектующих для сборки велосипедов следующих типов:
\begin{itemize}
	\item Дорожный;
	\item Горный;
	\item Кросс-кантри;
	\item Эндуро;
	\item Прогулочный.
\end{itemize}

Предприятие может предложить сконфигурировать сборку велосипеда, отдельно выбрав каждый из предложенных компонентов:
\begin{itemize}
	\item Рама;
	\item Вилка;
	\item Руль;
	\item Трансмиссия;
	\item Колеса;
	\item Тормозная система.
\end{itemize}

Контроль над выполнением работ по сборке велосипеда проводится в виде учета всех операций по сборке, настройке и тестированию, проводимых на территории предприятия ее сотрудниками. При этом в каждой записи содержится следующая информация о проведенных работах:
\begin{enumerate}
	\item Внутренний номер изделия;
	\item Время;
	\item Этап работ;
	\item Название цеха;
	\item Имя мастера;
	\item Статус;
	\item Примечание.
\end{enumerate}

На предприятии ведется учет всех компонентов велосипедов.
В базе данных предприятия хранится информация о каждом компоненте, приобретенном у партнеров или изготовленном самостоятельно. В независимости от типа компонента он обладает общей информацией о наименовании производителя, месте и времени изготовления, типе и рекомендованной розничной цене. 

Также каждый компонент имеет особые сведения, присущие данному типу детали.

\subsubsection*{Построение модели}
После приведения общих сведений о роде деятельности предприятия, факторизируем модель данных информационной системы предприятия в среде \erassistant. См. Рисунок \ref{fig:1-cycle}.
% TODO: \usepackage{graphicx} required
\begin{figure}[hpbt]
	\centering
	\includegraphics[width=1\linewidth]{images/1-cycle}
	\caption{Модель данных вело-предприятия}
	\label{fig:1-cycle}
\end{figure}

Укажем названия связей, их идентификаторы и кратность, исходя из вида отношений, выстроенных между сущностями.

На данном этапе выполнения работы мы реализовали модель данных будущего хранилища данных, планируемого к применению в компании, занимающейся сборкой и поставкой велосипедов по индивидуальному заказу.

\section{Создание логической\\и физической модели данных}
\subsection{\methodsection}
\subsection*{Теоретический материал}
На этапе \texttt{инфологического} проектирования базы данных должна быть построена
модель предметной области, не привязанная к конкретной СУБД, понятная не только
разработчикам информационной системы, но и экономистам, менеджерам и другим
специалистам. В то же время модель предметной области должна максимально точно
отражать семантику предметной области и позволять легко перейти к модели данных
конкретной СУБД.

Такими моделями являются модели <<сущность-связь>>. Известно несколько
методологий построения моделей <<сущность-связь>>. Наибольшее распространение
получила методология IDEF1X. Рассмотрим построение моделей "сущность-связь",
ориентируясь на продукт CA ERwin Data Modeler. ERwin имеет два уровня
представления модели:

\textbf{Логический уровень} --- это уровень, соответствующий \texttt{инфологическому} этапу проектирования
и не привязанный к конкретной СУБД. Модели логического уровня оперируют с
понятиями сущностей, атрибутов и связей, которые на этом уровне именуются на
естественном языке (в нашем случае – на русском) так, как они называются в
реальном мире.

\textbf{Физический уровень} --- это отображение логической модели на модель данных
конкретной СУБД. Одной логической модели может соответствовать несколько
физических моделей. Причем, Erwin (как и другие CASE-системы проектирования баз
данных) позволяет автоматизировать отображение логической модели на физическую.

Модель <<сущность-связь>> строится в виде диаграммы <<сущность-связь>>,
основными компонентами которой являются сущности (Entity) и связи\\(Relationship).
Отсюда происходят часто используемые названия модели (ER-модель) и диаграммы
(ER-диаграмма).

В ходе данной практической работы нами была описана и построена логическая и физическая модель данных средствами ПО \erdatamodaler.

Порядок построения модели данных в среде ERwin рассмотрим на примере
автоматизированной информационной системы "Реализация средств вычислительной
техники", предназначенной для учета продаж настольных компьютеров по заказам
клиентов.

Создание модели данных начинается с разработки логической модели, которая
должна представлять состав сущностей предметной области с перечнем атрибутов и
отношений между ними.

%В зависимости от глубины представления информации о данных различают 3
%подуровня логического уровня модели данных:
%\begin{itemize}
%	\item  диаграмма сущность – связь \texttt{(Entity Relationship Diagram, ERD)};
%	\item модель данных, основанная на ключах (\texttt{Key Based model, KB)}; --- полная атрибутивная модель данных \texttt{(Fully Attributed model, FA)}.
%\end{itemize}
%
%\texttt{Диаграмма сущность-связь} включает сущности и взаимосвязи, отражающие
%основные бизнес-правила предметной области.
%
%\texttt{Модель данных, основанная на ключах} --- более подробное представление данных.
%Данная модель включает описание всех сущностей и первичных ключей,
%необходимых для подробного описания предметной области.
%
%\texttt{Полная атрибутивная модель данных} --- наиболее детальное представление
%структуры данных предметной области. Данная модель представляет данные в третьей
%нормальной форме и включает все сущности, атрибуты и связи.
%
%Логическим соотношением между сущностями является \textbf{связь}. Каждому виду
%связи соответствует определенная кнопка, расположенная на палитре инструментов.
%Имя связи выражает некоторое ограничение или правило и облегчает чтение
%диаграммы. Каждая связь должна именоваться глаголом или глагольной фразой.

Результат разработки логической модели данных системы <<Реализация средств
вычислительной техники>>, предназначенной для учета продаж настольных
компьютеров по заказам клиентов приведен на Рисунке \ref{fig:2-logical-model-method}.

% TODO: \usepackage{graphicx} required
\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.7\linewidth]{images/2-method}
	\caption{Логическая модель данных системы <<Реализация средств вычислительной техники>>}
	\label{fig:2-logical-model-method}
\end{figure}

Для построения физической модели данных системы, следует определиться с СУБД, в которой будет реализована модель. При построении физической модели данных следует учитывать формальную теория представления и обработки данных в конкретной системе управления базами данных (СУБД).

В данной практической работе в качестве СУБД выбрана MySQL.

Приступим к построению физической модели данных системы <<Реализация средств вычислительной техники>>. Результат работы можно видеть на рисунке \ref{fig:2-phisical-model}.

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/2-phisical-model}
	\caption{Физическая модель данных системы <<Реализация средств вычислительной техники>>}
	\label{fig:2-phisical-model}
\end{figure}

\section{\individual}
Приступим к построению логической модели данных системы <<Велосипедное предприятие>>. 
В соответствии с моделью, реализованной в ходе первой практической работы, добавим в рабочую область следующие сущности:
\begin{itemize}
	\item Component;
	\item FrameInfo;
	\item Frame;
	\item Frameset;
	\item FrameSize;
	\item Fork;
	\item ComponentType;
	\item Wheelset;
	\item Groupset;
	\item Brake;
	\item FctCycleBuild;
	\item CycleType;
	\item Bar;
	\item Setup.
\end{itemize}
Добавим связи между сущностями в соответствии с ранее построенной моделью. Логическая модель системы <<Велосипедное предприятие>> приведена на рисунке \ref{fig:2-cycle-logical}.

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth]{images/2-cycle-logical}
	\caption{Логическая модель данных системы <<Велосипедное предприятие>>}
	\label{fig:2-cycle-logical}
\end{figure}

После уточнения типов данных, выбранных в соответствии с предметной областью и спецификой СУБД MySQL, построим физическую модель данных (см. рисунок \ref{fig:2-cycle-phisical}).

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth]{images/2-cycle-phisical}
	\caption{Физическая модель данных системы <<Велосипедное предприятие>>}
	\label{fig:2-cycle-phisical}
\end{figure}

После реализации физической и логической модели можно приступать к реализации модели данной системы в СУБД MySQL.


\section{Создание базы данных}
\subsection{\methodsection}
В ходе данной практической работы была создана база данных \texttt{forum}, которая хранит в себе сведения о пользователях форума и размещенных ими темах.

Помимо суперпользователя root, был создан пользователь denilai, под которым производятся все манипуляции с данными.

Создадим базу данных \texttt{forum} с помощью команды \texttt{create database forum;}


Создадим таблицу \texttt{users} с помощью данных команд (см. рисунок \ref{fig:create-users}):

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{images/create-users}
	\caption{}
	\label{fig:create-users}
\end{figure}

%\begin{lstlisting}
%create table users (
%	id_user int (10) AUTO_INCREMENT,
%	name varchar(20) NOT NULL,
%	email varchar(50) NOT NULL,
%	password varchar(15) NOT NULL,
%	PRIMARY KEY (id_user)
%);
%\end{lstlisting}

Создадим таблицу \texttt{topics} с помощью данных команд (см. рисунок \ref{fig:create-topics}):

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{images/create-topics}
	\caption{}
	\label{fig:create-topics}
\end{figure}

%\begin{lstlisting}
%create table topics (
%	id_topic int (10) AUTO_INCREMENT,
%	topic_name varchar(100) NOT NULL,
%	id_author int (10) NOT NULL,
%	PRIMARY KEY (id_topic),
%	FOREIGN KEY (id_author) REFERENCES users (id_user)
%);
%\end{lstlisting}
Создадим таблицу \texttt{posts} с помощью данных команд (см. рисунок \ref{fig:create-posts}):

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{images/create-posts}
	\caption{}
	\label{fig:create-posts}
\end{figure}
%\begin{lstlisting}
%create table posts (
%	id_post int (10) AUTO_INCREMENT,
%	message text NOT NULL,
%	id_author int (10) NOT NULL,
%	id_topic int (10) NOT NULL,
%	PRIMARY KEY (id_post),
%	FOREIGN KEY (id_author) REFERENCES users (id_user),
%	FOREIGN KEY (id_topic) REFERENCES topics (id_topic)
%);
%\end{lstlisting}


\end{document}




