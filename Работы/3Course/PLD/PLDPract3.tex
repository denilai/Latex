\documentclass[a4paper,14pt]{extarticle}

% Путь до папки с общими шаблонами
\newcommand{\pathToCommonFolder}{/home/denilai/Documents/repos/latex/Common}
% Название работы в титуле
\newcommand{\workname}{Отчет по лабораторной работе №3}
% Название дисциплины в титуле
\newcommand{\discipline}{Проектирование и разработка систем на базе ПЛИС}
% Название кафедры в титуле
\newcommand{\kafedra}{Кафедра Вычислительной техники}
% Тема работы в титуле
\newcommand{\theme}{Проектирование цифрового узла анализатора последовательности и
	его верификация средствами САПР Xilinx ISE 14.х.}
% Должность преподавателя в титуле
\newcommand{\rang}{ассистент}
\newcommand{\signature}{\pathToCommonFolder/empty}

% ФИО студента в титуле
\newcommand{\studentfio}{К.~Ю.~Денисов}
% ФИО преподавателя в титуле
\newcommand{\teacherfio}{А.~С.~Боронников}


\usepackage{tabularx}


\usepackage{booktabs}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcommand{\heading}[1]{\multicolumn{1}{c}{#1}}

% установка размера шрифта для всего документа
%\fontsize{20pt}{18pt}\selectfont
\usepackage{extsizes} % Возможность сделать 14-й шрифт

% Вставка заготовки преамбулы
\input{\pathToCommonFolder/ruspreamble}

\author{Кирилл Денисов}
\title{Лабораторная работа №2}
\date{\today}

%если не нужна тема работы в отчете, то указать в скобках что-либо, иначе оаставить пустым
\renewcommand{\withouttheme}{}
%если нужна дата представления отчета, то указать в скобках что-либо
%\renewcommand{\withoutsubmissiondate}{1}

% установка полуторного интервала
% \usepackage{setspace}  
% \onehalfspacing

% использовать Times New Roman
\renewcommand{\rmdefault}{ftm}


\begin{document}
	\thispagestyle{empty}
	% Вставка первого титульного листа
	\input{\pathToCommonFolder/titul-with-signature}
	\newpage
	%\tableofcontents
	\newpage
	%\listoftables
\section*{Постановка задачи}	
%\subsection* {Постановка задачи}

Требуется разработать цифровой узел на основе отладочной платы Digilent Nexys 4,
представляющий собой анализатор фиксированной последовательности логических
сигналов. Узел должен обеспечивать индикацию ожидаемых и вводимых элементов
последовательности посредством входящих в состав отладочной платы семисегментных
индикаторов согласно данному заданию.

Узел должен быть реализован в виде синтезируемой модели на языке Verilog HDL.

Интерфейс верхнего уровня иерархии модели должен состоять из набора сигналов,
представленного на рис. 1.

Автомат должен иметь интерфейс, представленный на рис \ref{fig:fsmexample}.

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/interface-pract3}
	\caption{Интерфейс модели цифрового узла}
	\label{fig:interface-pract3}
\end{figure}


Разрабатываемое устройство является синхронным цифровым узлом,
срабатывающим по восходящим фронтам синхросигнала CLK. Исключение составляет
асинхронный вход сброса CPU\_RSTn, принудительно устанавливающий все регистры
узла в исходное состояние. Подача сигнала сброса на вход узла осуществляется
посредством соответствующей кнопки (CPU\_RSTn) отладочной платы.

Распознавание элементов последовательности осуществляется четверками, т.е.
необходимо обеспечить последовательную загрузку в узел элементов Y c номерами 0-3, 4-
7, 8-B, C-F для успешного распознавания последовательности. При осуществлении ввода
значения, не соответствующего текущему ожидаемому элементу последовательности,
необходимо повторить ввод всей четверки элементов заново




Индикация работы узла посредством двух блоков семисегментных индикаторов для
каждого варианта осуществляется аналогично примеру, представленному на рис. 3 и
подчиняется следующим правилам:
\begin{enumerate}
	\item Левый блок семисегментных индикаторов отображает ожидаемый (младший
	разряд) и введенные (три старших разряда) элементы последовательности в объеме
	распознаваемой четверки.
	\item  Правый блок семисегментных индикаторов отображает предысторию ввода
	комбинаций последовательности. Последняя введенная комбинация отображается в
	младшем разряде блока.
	\item  Не задействованные в текущий момент времени семисегментные индикаторы на
	обоих блоках должны находится в выключенном состоянии.
	\item Обновление отображаемых значений на обоих блоках семисегментных
	индикаторов рекомендуется выполнять с частотой от 60Гц до 200Гц.
\end{enumerate}


\section*{Результат работы}

Реализуем устройство, являющегося синхронным цифровым узлом. Его работу организуем по восходящему фронту синхросигнала, асинхронный сброс --- по нисходящему фронту сигнала CPU\_RSTn. 

Приведем таблицу состояний устройства (см. Таблицу \ref{tab:states}). Текущее состояние цифрового устройства зависит от последнего введенного пользователем с помощью движковых переключателей элемента последовательности. 

\begin{table}[htbp]
	\centering
	\caption{Состояния цифрового устройства}
	\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
		\hline
		Состояние & 16& 15&	14	&13	&12&11&	10&	9&	8&	7&	6&	5&	4&	3&	2&	1&	0\\ \hline\hline
		Значение & 0 & 4 & 4 & 8 & 3 & 0 & 7 & 2 & 2 & D & 7 & C & 5 & 2 & A & C&-- \\ \hline\hline
		Разряд & F & E & D & C & B & A & 9 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 &--\\ \hline
	\end{tabular}

	\label{tab:states}
\end{table}

Приведем граф состояний цифрового устройства (см. Рисунок~\ref{fig:state-graph-pract3}). Переход в следующее состояние происходит только в случае ввода верного элемента последовательности. При неправильном вводе цифровое устройство переходит в ближайшее пройденное состояние, номер которого кратен 4. Номер состояния, в которое перейдет устройство в случае некорректного ввода можно вычислить по формуле 
\[S_{i+1}=(S_i \div 4) \cdot 4\]

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{images/state-graph-pract3}
	\caption{Граф состояний}
	\label{fig:state-graph-pract3}
\end{figure}

\newpage
Приведем блок схему работы устройства (см. Рисунок~\ref{fig:algorithm-pract3}). Значение Х представляет
собой номер элемента цифровой последовательности, ввод значения которого (Y)
ожидается. Значения Y каждого элемента цифровой последовательности определяются
вариантом задания.

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.68\linewidth]{images/algorithm-pract3}
	\caption{Алгоритм распознавания последовательности}
	\label{fig:algorithm-pract3}
\end{figure}

Приведем структурную схему синхронного цифрового узла (см. Рисунок~\ref{fig:unit-pract3}).

% TODO: \usepackage{graphicx} required
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth]{images/unit-pract3}
	\caption{Структурная схема узла}
	\label{fig:unit-pract3}
\end{figure}


\subsection*{Описание принципа работы}



\paragraph{Вывод: }
В ходе данной практической работы нами были получены общие навыки работы с программным обеспечением Xilinx ISE Design Suite, изучены основы языка Verilog.

С помощью полученных знаний был спроектирован конечный автомат, представляющий собой генератор
фиксированной последовательности логических сигналов, в виде синтезируемой модели.
\end{document}
