\documentclass[a4paper,14pt]{extarticle}

% Путь до папки с общими шаблонами
\newcommand{\pathToCommonFolder}{../../Common}
% Название работы в титуле
\newcommand{\workname}{Отчет по практическим работам}
% Название дисциплины в титуле
\newcommand{\discipline}{Теория автоматов}
% Название кафедры в титуле
\newcommand{\kafedra}{Кафедра Вычислительной техники}
% Тема работы в титуле
\newcommand{\theme}{Сложение чисел с плавающей точкой}
% Должность преподавателя в титуле
\newcommand{\rang}{ассистент}
% ФИО преподавателя в титуле
\newcommand{\teacherfio}{А.~С.~Боронников}


\usepackage{tabularx}

\usepackage{booktabs}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcommand{\heading}[1]{\multicolumn{1}{c}{#1}}

\usepackage{extsizes} % Возможность сделать 14-й шрифт

% Вставка заготовки преамбулы
\input{\pathToCommonFolder/ruspreamble}

% установка размера шрифта для всего документа
%\fontsize{20pt}{18pt}\selectfont


\author{Кирилл Денисов}
\title{Практическая работа №5}
\date{\today}

% установка полуторного интервала
% \usepackage{setspace}  
% \onehalfspacing

% использовать Times New Roman
\renewcommand{\rmdefault}{ftm}


\begin{document}
	\thispagestyle{empty}
	
	% Вставка первого титульного листа
	%\input{\pathToCommonFolder/titulAll}
	
	\newpage
	\tableofcontents
	%\listoffigures
	\newpage
	
\section*{Расчетно-пояснительная записка}
\section{Постановка задачи}
Разработать вычислительное устройство, состоящее из  двух взаимосвязанных частей --- операционного и управляющего автоматов, и выполняющее следующие операции:
\begin{enumerate}
	\item Деление двух целых чисел в дополнительном коде;
	\item Сложение двух чисел, представленных в экспоненциальном формате.
\end{enumerate}
Операнды представлены в виде 32 двоичных разрядов. Управляющий автомат реализовать по схеме с регулярной адресацией в последовательном варианте.
\section{Интерфейс устройства}
\section{Описание алгоритмов}
\subsection{Деление двух целых чисел в дополнительном коде}
Для деления двух целых чисел представленных в двоичном дополнительном коде реализуем алгоритм деления без восстановления остатка. Данный алгоритм является оптимальным по суммарному времени, так как обработка очередного разряда результа осуществляется за один такт.

Введем обозначения операндов, используемых в данной операции (таблица \ref{tab:vars}):
\begin{table}[h!]
	\centering
	\begin{tabular}{|c|c|}
		\hline
		\multicolumn{1}{|c|}{\textbf{Обозначение}} & \multicolumn{1}{c|}{\textbf{Назначение}} \\ \hline
		A & Делимое в доп. коде \\ \hline
		B & Делитель в доп. коде \\ \hline
	\end{tabular}
	\label{tab:vars}
	\caption{Операнды}
\end{table} 
\newpage
Опишем алгоритм деления следующим образом:
\begin{enumerate}
	\item \label{enum:first} Анализируем знак делимого --- если делимое отрицательное, то все биты регистра частичного остатка устанавливаем в <<1>>, если делимое положительное, то все биты регистра частичного остатка устанавливаем в <<0>>;
	\item Сдвигаем остаток влево; на место младшего разряда помещаем старший разряд делимого;
	\item Анализируем знаки остатка и делителя --- в случае, если их знаки одинаковые, то выполняем вычитание делителя из остатка (прибавляем противоположное число), полученного на данном этапе. Иначе же прибавляем значение делителя к значению остатка%
	\item \label{enum:last} Анализируем значение остатка после выполнения арифметических действий --- заносим в частное инвертированный знак остатка, вычисленного на данном этапе, вместе с этим сдвигая его влево. 
	\item Повторяем пункты \ref{enum:first}-\ref{enum:last} до тех пор, пока не будут сдвинуты все разряды делимого. 
\end{enumerate}

Стоит отметить, что для формирования правильного выходного результата после выполнения вышеперечисленных пунктов необходимо выполнить коррекцию значений частного и остатка в зависимости от знаков операндов. Для каждой комбинации знаков делимого и делителя реализована отдельная операция коррекции. См таблицу \ref{tab:correction4}.

\begin{table}[h!]
	\centering
	\begin{tabular}{|m{0.2\linewidth}|m{0.67\linewidth}|}
		\hline
		\textbf{Комбинация} &\multicolumn{1}{c|}{\textbf{Коррекция}}\\
		\hline
		$A\ge0, B>0 $ & Коррекция не требуется \\ 
		\hline
		$A\ge0, B<0$ & Перевести частное в доп. код\\
		\hline
		$A\le0, B>0$ & Результат верен, если остаток $=0$. Иначе прибавить к отрицательному частному единицу, перевести остаток в доп. код\\
		\hline
		$A\le 0, B\le 0$ & Изменить знак делимого, перевести остаток в доп. код\\
		\hline
	\end{tabular}
	\caption{Коррекция результата}
	\label{tab:correction4}
\end{table}
\newpage

Приведем пример вычисления частного от деления чисел $(-13_{10}=10011_2)\div 3_{10}=00011_2$. См. таблицу \ref{tab:examplediv}.
\begin{table}[h!]
	\small

	\begin{tabular}{|l|l|l|m{0.6\linewidth}|}
		\hline
		\multirow{2}*{Частное} & Остаток & Делимое & 	\multirow{2}*{Операция} \\ \cline{2-3}
		& \multicolumn{1}{l|}{11111} & \multicolumn{1}{l|}{10011} &  \\ \hline \hline
		& \multicolumn{1}{l|}{11111} & 0011х & Сдвиг остатка \\ \hline
		& 00011 &  & Сложение с делителем \\ \hline
		1 & 00010 &  & Результат сложения — положительный остаток \\ \hline
		& 00100 & 011хх & Сдвиг остатка \\ \hline
		& 11101 &  & Вычитание делителя \\ \hline
		1 & 00001 &  & Результат вычитания — положительный остаток \\ \hline
		& 00010 & 11ххх & Сдвиг остатка \\ \hline
		& 11101 &  & Вычитание делителя \\ \hline
		0 & 11111 &  & Результат вычитания — отрицательный остаток \\ \hline
		& 11111 & 1хххх & Сдвиг остатка \\ \hline
		& 00011 &  & Сложение с делителем \\ \hline
		1 & 00010 &  & Результат вычитания — положительный остаток \\ \hline
		& 00101 & ххххх & Сдвиг остатка \\ \hline
		& 11101 &  & Вычитание делителя \\ \hline
		1 & 00010 &  & Результат вычитания — положительный остаток \\ \hline
		& 11111 &  & Восстановленный отрицательный остаток \\ \hline
	\end{tabular}
	\caption{Пример деления целых чисел в доп. коде}
	\label{tab:examplediv}
\end{table}

В результате вычислений получим частное $(-5_{10}) = 11011_2$ и остаток $2_{10}=00010_2$.

Опишем алгоритм работы автомата с помощью блок схемы. Используем сумматор для нахождения текущего значение частичного остатка (ЧО), счетчик для подсчета обработанных разрядов и регистры для хранения и использования разрядов делителя и делимого. Обозначим микрокоманды от $m_0$ до $m_4$. См. рис.~\ref{img:algorithm4}.
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.5\linewidth]{algorithm3}
	\caption {Алгоритм деления двух чисел в дополнительном коде}
	\label{img:algorithm4}
\end{figure}
\subsubsection{Сложение двух чисел в экспоненциальном формате}

\end{document}


