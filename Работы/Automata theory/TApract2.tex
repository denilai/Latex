\documentclass[a4paper,14pt]{extarticle}

% Путь до папки с общими шаблонами
\newcommand{\pathToCommonFolder}{/home/denilai/Desktop/LaTeX/Common}
% Название работы в титуле
\newcommand{\workname}{Отчет по практической работе №2}
% Название дисциплины в титуле
\newcommand{\discipline}{Теория автоматов}
% Название кафедры в титуле
\newcommand{\kafedra}{Кафедра Вычислительной техники}
% Тема работы в титуле
\newcommand{\theme}{Умножитель 4-разрядных чисел в дополнительном коде}
% Должность преподавателя в титуле
\newcommand{\rang}{ассистент}
% ФИО преподавателя в титуле
\newcommand{\teacherfio}{А.~С.~Боронников}


\usepackage{tabularx}

\usepackage{booktabs}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcommand{\heading}[1]{\multicolumn{1}{c}{#1}}

% Вставка заготовки преамбулы
\input{\pathToCommonFolder/ruspreamble}

% установка размера шрифта для всего документа
%\fontsize{20pt}{18pt}\selectfont
\usepackage{extsizes} % Возможность сделать 14-й шрифт

\author{Кирилл Денисов}
\title{Практическая работа №2}
\date{\today}

% установка полуторного интервала
% \usepackage{setspace}  
% \onehalfspacing

% использовать Times New Roman
\renewcommand{\rmdefault}{ftm}


\begin{document}
	\thispagestyle{empty}
	
	% Вставка первого титульного листа
	\input{\pathToCommonFolder/titul}
	
	\newpage
	\tableofcontents
	\newpage
	
\section{Общее строение автомата}
В любом устройстве обработки цифровой информации можно выделить два основных блока – операционный автомат (ОА) и управляющий автомат (УА). Операционный автомат (ОА) служит для хранения слов информации, выполнения набора микроопераций и вычисления значений логических условий, т.е. операционный автомат является структурой, организованной для выполнения действий над информацией. Микрооперации, выполняемые ОА, задаются множеством \textit{управляющих} сигналов $Y\left\{y_1,....,y_M\right\}$, с каждым из которых отождествляется определенная микрооперация.

Значения логических условий, вычисляемые в операционном автомате, отображаются множеством \textit{осведомительных} сигналов $X=\left\{x_1,...,x_L\right\}$, каждый из которых отождествляется с определенным логическим условием.

Управляющий автомат (УА) генерирует последовательность управляющих сигналов, предписанную микропрограммой и соответствующую значениям логическим условий. Управляющий автомат задает порядок выполнения действий в ОА, вытекающий из алгоритма выполнения операций. Наименование операции, которую необходимо выполнить в устройстве, определяется кодом g операции, поступающим в УА извне. 

В отличие от УА с жесткой логикой, закон функционирования которого обеспечивается определенным образом соединенными логическими элементами, в автоматах, построенных на основе ПЗУ, заданная микропрограмма реализуется в явной форме и хранится в памяти в виде последовательности управляющих слов. Управляющее слово определяет порядок работы устройства в течение одного такта и называется микрокомандой (МК). Она содержит информацию о микрооперациях, которые должны выполняться в данном такте, и (или) об адресе следующей микрокоманды.




В ходе данной практической работы был реализован автомат, выполняющий умножение 4-разрядных чисел в дополнительном коде. Управляющий автомат был построен по схеме с двумя адресами в памяти в последовательном варианте. Рассмотрим строение управляющего автомата. См рисунок~\ref{img:scheme}.

\begin{figure}[h!]
	\begin{center}
		\includegraphics[width=0.8\linewidth]{two_adress_rom}
		\caption{УА с двумя адресами в памяти; последовательный вариант}
		\label{img:scheme}
	\end{center}	
\end{figure}

В конкретной реализации на адресный вход мультиплексора подается сигнал \textit{CT0}~---~признак нуля в счетчике. Основываясь на значении данного сигнала выбирается один из двух альтернативных адресов последующих состояний автомата.
\newpage
\section{Алгоритм работы автомата}
Опишем алгоритм работы автомата с помощью блок схемы. Используем сумматор для сложения текущего значение СЧП и множимого, счетчик для подсчета обработанных разрядов и регистры для хранения и использования разрядов рассматриваемых чисел. Обозначим микрокоманды от $m_0$ до $m_4$. См. рисунок~\ref{img:algorithm}.\vspace{2ex}

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\linewidth]{algorithm}
	\caption {Алгоритм умножения двух 4-разрядных чисел}
	\label{img:algorithm}
\end{figure}

В алгоритме присутствует условие, это означает, что при реализации операционного автомата текущие значение счетчика необходимо проверять при переходе $m_0 \to m_1$ и $m_3 \to m_1$.

После построения алгоритма работы автомата следует перейти к реализации операционной части.

\section {Реализация Операционного автомата}
Построим операционный автомат, выполняющий умножение двух 4-разрядных чисел посредством использования четырех регистров, в том числе двух сдвиговых. Приведем названия и назначения каждого из регистров. См. таблицу \ref{tab:regs}.
\begin{table}[h!]
	\centering
		\begin{tabular}{|p{0.27\linewidth}|p{0.6\linewidth}|}
			\hline
			\textbf{Идентификатор} & \textbf{Назначение} \\ \hline
			$RG\_A$ & Хранит разряды множимого \\ \hline
			$RG\_B$ & Сдивговый регистр. Хранит разряды множителя \\ \hline
			$RG\_R$ & Cдвиговый регистр. Хранит разряды СЧП, служит для хранения старших разрядов результата \\ \hline
		\end{tabular}
		\caption{Регистры операционного автомата}
		\label{tab:regs}
\end{table}

Укажем необходимые признаки, которые впоследствии будут вырабатываться управляющим автоматом. См. таблицу \ref{tab:signals}.
\begin{table}[hbtp]
	\centering
	\begin{tabular}{|p{0.27\linewidth}|p{0.6\linewidth}|}
		\hline
		\textbf{Признак} & \textbf{Назначение} \\ \hline
		$EMIT\_R_0$ & Сигнализирует об окончании операции умножения \\ \hline
		$LOAD\_R$ & Загрузка в регистр $RG\_R$ \\ \hline
		$RST$ & Асинхронный сброс всех элементов \\ \hline
		$COUNT\_CT$ & Загрузка счетчика. Декремент, если $DECR\_CT==1$ \\ \hline
		$DECR\_CT$ & Декремент счетчика \\ \hline
		$LOAD\_AB$ & Загрузка в регистры $RG\_A \text{ и } RG\_B$ \\ \hline
		$SHIFT\_RB$ & Сдвиг в регистрах $RG\_R \text{ и } RG\_B$ \\ \hline
	\end{tabular}
	\caption{Осведомительные сигналы (признаки)}
	\label{tab:signals}
\end{table}


При умножении по данному алгоритму следует обратить внимание на необходимость использования модифицированного дополнительного кода для множимого, поскольку при получении частичных произведений возможно временное переполнение разрядной сетки. Использование модифицированного дополнительного кода позволяет его зафиксировать без потери знака. Это переполнение устраняется последующим сдвигом частичного произведения вправо. 

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.9\linewidth]{OA_two_adress}
	\caption {Схема операционного автомата}
	\label{img:oa}
\end{figure}

Соединим все элементы в соответствии с алгоритмом задачи. См. рисунок \ref{img:oa}.
\newpage
\section {Реализация управляющего автомата}
Приступим к построению управляющего автомата, определяющего последовательность выполнения микрокоманд для умножения двух 4-разрядных чисел в дополнительном коде.

Определим разрядность ПЗУ, в котором будут содержаться альтернативные адреса переходов. Микроинструкция представлена в виде 13 разрядов, где 6 разрядов занимают два альтернативных адреса переходов, а оставшиеся 7~--- признаки, расположенные в следующем порядке: RST, SHIFT\_RB, LOAD\_AB, LOAD\_R, DECR\_CT, CONT\_CT, EMIT\_R0. Адрес текущей команды будет храниться в 3-разрядном регистре.

Альтернативные адреса будут подаваться на вход мультиплексора, управляемого сигналом \textit{CT0}, затем, выбранный адрес будет загружен в регистр текущего состояния, выход которого подключен к постоянному запоминающему устройству.


Заполним память в соответствии в алгоритмом, подключим ПЗУ и регистр последовательным способом. См рисунок \ref{img:ma}.
\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.8\linewidth]{MA_two_adress}
	\caption {Схема операционного автомата}
	\label{img:ma}
\end{figure}

\section{Тестирование работы автомата}
После реализации операционного и управляющего автомата следует приступить к объединению данных устройств, тестированию их совместной работы. Подключим признаки к входам соответствующих логических элементов и цифровых устройств с помощью туннелей. Добавим блок ввода исходных данных, используя контакты, блок вывода~---регистр результата и индикатор завершения операции умножения.

Проведем проверку корректности выходных результатов построенного цифрового устройства. Перемножим два  4-разрядных двоичных числа $1111_{доп_2} \ast 1111_{доп_2}$, которые в данном случае интерпретируются как дополнительный код отрицательного десятичного числа $-1_{10}$ ожидая получить результат $-1_{10} = 00000001_{доп_2}$. Укажем входные данные, будем подавать тактовые сигналы до тех пор, пока индикатор не сообщит нам о завершении операции, сравним практические результаты с ожидаемыми. См рисунок~\ref{img:test}. Умножение выполнено корректно. Ожидаемые и полученные результаты совпадают.
\begin{figure}[h!]
	\centering
	\includegraphics[width=\linewidth]{test_two_adress}
	\caption {Схема операционного автомата}
	\label{img:test}
\end{figure}

Теперь перемножим положительное число $7_{10}=0111_{доп_2}$ и отрицательное число $-2_{10}=1110_{доп_2}$, ожидая получить результат $-14_{10}=11110010_{доп_2}$. Введем исходные данные и сравним результаты вычислений. См. рисунок \ref{img:test1}. Как видно на рисунке, вычисления привели к верному ответу. С помощью данного автомата можно перемножать числа в диапазоне $(-7;7)$.
\begin{figure}[h!]
	\centering
	\includegraphics[width=\linewidth]{test_two_adress1}
	\caption {Схема операционного автомата}
	\label{img:test1}
\end{figure}
\newpage

\section {Вывод}
В ходе данной практической работы было рассмотрено строение и работа последовательного варианта управляющего автомата c двумя адресами в памяти. Использовав полученные знания на практике, на основе данного управляющего автомата построено вычислительное устройство (операционный и управляющий автомат), реализующее операцию умножения двух 4-разрядных чисел в дополнительном коде. Работа данного устройства испытана, проверена корректность полученных результатов.
\end{document}


